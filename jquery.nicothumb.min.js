/*
 jQuery Nico Thumb v0.0.1
 https://github.com/totoraj930/jquery-NicoThumb
 (c) 2016 Reona Oshima (totoraj).
 License: MIT
 http://opensource.org/licenses/mit-license.php
*/
$.fn.nicothumb=function(t){var e=$.extend({video_id:"sm9",insert:!0,template:'<h1><a href="{watch_url}">{title}</a></h1><a href="{watch_url}"><img src="{thumbnail_url}" alt="サムネイル"></a><p>再生数: <span>{view_counter}</span></p><p>コメント数: <span>{comment_num}</span></p><p>マイリスト数: <span>{mylist_counter}</span></p><p>再生時間: <span>{length}</span></p>',callback:function(){}},t),n="http://ext.nicovideo.jp/thumb/",r=$(this),a={status:"ok",title:"",view_counter:0,comment_num:0,mylist_counter:0,length:"",watch_url:"",thumbnail_url:""};return $.ajax({url:n+e.video_id,type:"GET"}).done(function(t){var n=$(t.results[0]),i="";n.find("a.video").text()?(a.title=n.find("a.video").text(),a.view_counter=n.find("strong:nth-of-type(1)").eq(0).text(),a.comment_num=n.find("strong:nth-of-type(2)").eq(0).text(),a.mylist_counter=n.find("strong:nth-of-type(3)").eq(0).text(),a.length=n.find("strong:nth-of-type(1)").eq(1).text(),a.watch_url=n.find("a.video").attr("href"),a.thumbnail_url=n.find("img.video_img").attr("src"),i=e.template,i=i.replace(/{title}/g,a.title),i=i.replace(/{view_counter}/g,a.view_counter),i=i.replace(/{comment_num}/g,a.comment_num),i=i.replace(/{mylist_counter}/g,a.mylist_counter),i=i.replace(/{length}/g,a.length),i=i.replace(/{watch_url}/g,a.watch_url),i=i.replace(/{thumbnail_url}/g,a.thumbnail_url)):(a.status="error",i="<h1>取得に失敗しました</h1>"),console.log(i),e.insert&&r.html(i),e.callback(a)}),this};
